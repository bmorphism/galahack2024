"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.legacyClientAccountId = void 0;
const ID_SUB_SPLIT_CHAR = "|";
/**
 * Get the client's account ID
 * @deprecated
 */
function legacyClientAccountId(ctx) {
    const clientAccountID = ctx.clientIdentity.getID();
    const OUPrefix = "::/OU=";
    const OUSuffix = "/";
    const CNPrefix = "/CN=";
    const CNSuffix = ":";
    const orgStartIndex = clientAccountID.indexOf(OUPrefix) + OUPrefix.length;
    const orgEndIndex = clientAccountID.indexOf(OUSuffix, orgStartIndex);
    const nameStartIndex = clientAccountID.indexOf(CNPrefix) + CNPrefix.length;
    const nameEndIndex = clientAccountID.indexOf(CNSuffix, nameStartIndex);
    const org = clientAccountID.slice(orgStartIndex, orgEndIndex);
    const name = clientAccountID.slice(nameStartIndex, nameEndIndex);
    return `${org}${ID_SUB_SPLIT_CHAR}${name}`;
}
exports.legacyClientAccountId = legacyClientAccountId;
